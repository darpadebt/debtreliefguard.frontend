<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Charset & Compatibility -->
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <!-- Viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />

  <!-- =========================
       TITLE & DESCRIPTION (SEO)
       ========================= -->
  <title>Compare Verified Debt Help vs High-Risk Offers | DebtReliefGuard</title>
  <meta name="description" content="See how FTC-aligned, consumer-first debt help compares to risky or aggressive debt relief options. Transparent pros/cons and a link to a secure estimate. Backed by Gateway Financial Settlement Relief (GFSR)." />
  <meta name="keywords" content="compare debt help, ethical debt relief, FTC compliant debt comparison, secure debt estimate, scam-free debt solutions, how to compare debt relief programs, avoid debt scams, debt settlement vs consolidation" />
  <meta name="robots" content="index,follow,max-image-preview:large" />
  <link rel="canonical" href="https://debtreliefguard.com/compare.us.html" />

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://debtreliefguard.com/compare.us.html" />
  <meta property="og:title" content="Compare Verified Debt Help vs High-Risk Offers" />
  <meta property="og:description" content="Side-by-side comparison of legitimate, FTC-aligned debt help vs risky offers. See fees, timelines, and scam checks." />
  <meta property="og:site_name" content="DebtReliefGuard.com" />
  <meta property="og:image" content="https://debtreliefguard.com/og-cover.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Compare Verified Debt Help vs High-Risk Offers" />
  <meta name="twitter:description" content="Transparent comparisons to choose confidently, plus a secure estimate link." />
  <meta name="twitter:image" content="https://debtreliefguard.com/og-cover.jpg" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />

  <!-- ===== A/B hook for AI Loop Optimizer (050) ===== -->
  <meta name="x-ai-optimizer-page" content="drg:compare" />

  <!-- =========================
       STYLES (mirror home page)
       ========================= -->
  <style>
    :root {
      --ink:#222; --bg:#f9fafe; --brand:#004477; --brand-2:#003057;
      --cta:#2563eb; --ok:#007b55; --card:#fff; --card-b:#e5e7eb;
      --shadow:0 10px 30px rgba(0,0,0,.12);
      --callbar-h: 64px; /* mobile dual action bar height */
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg); color:var(--ink); line-height:1.55;
      padding-top:76px; /* space for sticky top nav */
    }
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{position:fixed;left:12px;top:12px;padding:.5rem .75rem;background:#000;color:#fff;z-index:10000;border-radius:6px}

    /* Sticky top nav (home parity colors) */
    .sticky-nav{
      position:fixed; top:0; left:0; right:0; background:var(--brand-2);
      z-index:9999; display:flex; gap:.75rem; padding:.75rem 1rem; overflow-x:auto; white-space:nowrap;
      box-shadow:0 2px 5px rgba(0,0,0,0.08)
    }
    .sticky-nav a{ color:#fff; font-weight:600; text-decoration:none; padding:.5rem .75rem; flex:0 0 auto; border-radius:6px }
    .sticky-nav a:hover,.sticky-nav a:focus{ text-decoration:underline; outline:none }
    .sticky-nav::-webkit-scrollbar{ display:none }

    /* Hero-ish page header (home parity) */
    header{
      max-width:960px; margin:0 auto; text-align:center; background:var(--brand);
      color:#fff; padding:1.5rem 1rem; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.08)
    }
    header h1{ margin:.2rem 0 .4rem; font-size:clamp(1.6rem,3vw + 1rem,2.3rem); font-weight:800 }
    header .sub{ margin:0 0 .8rem; opacity:.95 }
    .hero-ctas{ display:flex; justify-content:center; gap:.6rem; flex-wrap:wrap }
    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:.4rem; border-radius:10px; padding:.7rem 1.05rem; font-weight:800; text-decoration:none }
    .btn-primary{ background:#0b63f6; color:#fff; box-shadow:var(--shadow) }
    .btn-outline{ background:transparent; color:#fff; border:2px solid rgba(255,255,255,0.75) }

    /* Main container */
    .container{
      max-width:960px; margin:1.25rem auto 4rem; background:#fff;
      padding:1.25rem; border-radius:12px; box-shadow:0 2px 12px rgba(0,0,0,.06);
      border:1px solid var(--card-b)
    }
    h1,h2{text-align:center}
    .muted-text{ color:#6b7280; font-size:.95rem }

    /* Comparison table */
    .table-wrap{ overflow:auto }
    table{ width:100%; border-collapse:separate; border-spacing:0; border:1px solid #e5e7eb; border-radius:12px; overflow:hidden; margin-top:1rem }
    thead th{ background:#0f172a; color:#e5e7eb; text-align:left; padding:.75rem; font-weight:800; position:sticky; top:0 }
    tbody td, tbody th{ padding:.75rem; border-top:1px solid #eef0f4; vertical-align:top }
    tbody tr:nth-child(odd){ background:#fafbff }
    .cta{ text-align:center; margin-top:2rem }
    .cta a{ background:var(--cta); color:#fff; padding:.75rem 1.5rem; border-radius:8px; font-weight:800; text-decoration:none; box-shadow:0 6px 14px rgba(0,0,0,.08) }

    /* Mobile dual action bar */
    .mobile-bar{
      position:fixed; left:0; right:0; bottom:0; background:#0b1220; color:#fff;
      display:flex; gap:8px; padding:.6rem; z-index:9998
    }
    .mobile-bar a{ flex:1; text-align:center; border-radius:10px; padding:.75rem .5rem; font-weight:900; text-decoration:none }
    .mobile-call{ background:var(--ok); color:#fff }
    .mobile-est{ background:#0b63f6; color:#fff }
    @media (min-width:769px){ .mobile-bar{ display:none } }

    /* Desktop sticky phone pill */
    .desk-call{
      position:fixed; right:14px; bottom:14px; z-index:10002; display:none; align-items:center; gap:.4rem;
      padding:.7rem 1rem; border-radius:999px; background:#007b55; color:#fff; font-weight:900; text-decoration:none;
      box-shadow:0 10px 24px rgba(0,0,0,.18);
    }
    @media (min-width:769px){ .desk-call{ display:inline-flex } }

    /* Sticky bottom site menu */
    .sticky-menu{
      position:fixed; bottom:0; left:0; right:0; background:#004488; color:#fff; font-size:.85rem; z-index:9997; border-top:2px solid #2563eb
    }
    .sticky-menu nav{ display:flex; overflow-x:auto; white-space:nowrap; padding:.5rem; gap:1rem; justify-content:center }
    .sticky-menu nav a{ color:#ffdd00; text-decoration:none; padding:.3rem .5rem; border-radius:4px; transition:background .2s }
    .sticky-menu nav a:hover{ background:rgba(255,255,255,.1) }
    @media (max-width:768px){ .sticky-menu nav{ gap:.5rem; font-size:.75rem } }

    /* ensure content sits above bars on mobile */
    @media (max-width: 768px){
      body, main { padding-bottom: calc(var(--callbar-h) + env(safe-area-inset-bottom) + 70px); }
    }

    footer.note{ max-width:960px; margin:1rem auto 5.5rem; text-align:center; color:#666 }
    footer.note p{ font-size:.82rem; color:#999 }
  </style>

  <!-- =========================
       STRUCTURED DATA (JSON-LD)
       ========================= -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"WebSite","name":"DebtReliefGuard","url":"https://debtreliefguard.com/","publisher":{"@id":"https://gatewaydebthelp.com/#gfsr"}}
  </script>

  <!-- Breadcrumbs for Compare page -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[
    {"@type":"ListItem","position":1,"name":"Home","item":"https://debtreliefguard.com/"},
    {"@type":"ListItem","position":2,"name":"Compare Verified vs High-Risk","item":"https://debtreliefguard.com/compare.us.html"}
  ]}
  </script>

  <!-- Unified Organization/FinancialService (shared @id; disambiguation) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":["Organization","FinancialService"],
    "@id":"https://gatewaydebthelp.com/#gfsr",
    "name":"Gateway Financial Settlement Relief, LLC",
    "legalName":"Gateway Financial Settlement Relief, LLC",
    "alternateName":["Gateway Debt Help","GFSR"],
    "url":"https://gatewaydebthelp.com/",
    "logo":"https://debtreliefguard.com/og-cover.jpg",
    "telephone":"+1-888-437-7141",
    "address":{"@type":"PostalAddress","addressCountry":"US","addressRegion":"FL"},
    "areaServed":{"@type":"Country","name":"United States"},
    "sameAs":[
      "https://gatewayfinancialsettlementrelief.com/",
      "https://debthelpform.com/",
      "https://debtreliefguard.com/",
      "https://gatewaydebthelp.com/"
    ],
    "contactPoint":{
      "@type":"ContactPoint",
      "telephone":"+1-888-437-7141",
      "contactType":"customer service",
      "areaServed":"US",
      "availableLanguage":["English"]
    },
    "disambiguatingDescription":"Florida-operated, Wyoming-registered debt relief company using 'Gateway Debt Help' as a marketing tagline. Not affiliated with Gateway Debt Relief of Costa Mesa, CA."
  }
  </script>

  <!-- ===== A/B slots for 050 ===== -->
  <script>
    window.__ab = {
      pageKey: 'drg:compare',
      slots: {
        headline: '#ab-cta-text',
        primaryCta: '.hero-ctas .btn.btn-primary',
        phoneCta: '.hero-ctas .btn.btn-outline'
      },
      defaults: {
        primaryCtaText: 'üîí Start Secure Estimate',
        primaryCtaHref: 'https://debthelpform.com/#lead-form'
      }
    };
  </script>
</head>

<body>
  <a href="#main" class="skip-link">Skip to content</a>

  <!-- Sticky Header (expanded to all pages) -->
  <nav class="sticky-nav" role="navigation" aria-label="Main navigation">
    <a href="/">Home</a>
    <a href="/compare.us.html" aria-current="page">Compare Us</a>
    <a href="/how.it.works.index.html">How It Works</a>
    <a href="/debt.relief.option.index.html">Relief Options</a>
    <a href="/credit.card.relief.index.html">Credit Card Relief</a>
    <a id="link-savings-top" href="/savings.calculator.index.html">Calculator</a>
    <a href="/reviews.index.html">Reviews</a>
    <a href="/blog.index.html">Blog</a>
    <a href="/scam.warning.index.html">Scam Warnings</a>
    <a href="/faq.index.html">FAQ</a>
    <a href="/contact.index.html">Contact</a>
    <a href="/privacy.policy.index.html">Privacy</a>
    <a href="/terms.index.html">Terms</a>
    <a href="https://debthelpform.com/#lead-form" style="background:#2563eb;color:white;padding:0.5rem 0.75rem;border-radius:6px;">Estimate</a>
    <a href="https://gatewaydebthelp.com" target="_blank" rel="noopener">GatewayDebtHelp.com</a>
    <a href="https://gatewayfinancialsettlementrelief.com" target="_blank" rel="noopener"><strong>GFSR Owner</strong></a>
  </nav>

  <!-- Desktop sticky phone pill -->
  <a class="desk-call" href="tel:+18884377141">üìû 888-437-7141</a>

  <!-- HERO -->
  <header>
    <h1 id="ab-cta-text">Compare Verified Relief vs Risky Promises</h1>
    <p class="sub">Before you sign up for anything, know the facts. Transparent, FTC-aligned comparisons so you can choose confidently.</p>
    <div class="hero-ctas">
      <a class="btn btn-primary" href="https://debthelpform.com/#lead-form" target="_blank" rel="noopener" aria-label="Start secure savings estimate">üîí Start Secure Estimate</a>
      <a class="btn btn-outline" href="tel:+18884377141" aria-label="Call now for help">üìû Talk to a Specialist</a>
    </div>
  </header>

  <!-- Main Content -->
  <main id="main" class="container" role="main">
    <p class="muted-text" style="text-align:center">
      Many offers look legit ‚Äî but come with hidden risks. Here‚Äôs how verified, compliant programs compare to high-pressure or unclear alternatives.
    </p>

    <div class="table-wrap" aria-label="Debt Relief Comparison Table">
      <table>
        <thead>
          <tr>
            <th scope="col">Feature</th>
            <th scope="col">Verified Relief (Our System)</th>
            <th scope="col">High-Risk Debt Offers</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>FTC Compliance</td><td>‚úÖ Verified. No upfront fees. Transparent.</td><td>‚ùå Often fails to meet FTC standards</td></tr>
          <tr><td>Realistic Claims</td><td>‚úÖ Based on your info, not generic promises</td><td>‚ùå ‚ÄúGuaranteed savings‚Äù or ‚Äúerase debt instantly‚Äù</td></tr>
          <tr><td>Lead Privacy</td><td>‚úÖ Submitted to one provider, encrypted</td><td>‚ùå May be sold to multiple third parties</td></tr>
          <tr><td>Program History</td><td>‚úÖ Evaluated, documented, legally aligned</td><td>‚ùå Often unverified or undisclosed</td></tr>
          <tr><td>Form Experience</td><td>‚úÖ Simple, no pressure, user-first</td><td>‚ùå Urgent popups, auto-calls, or hidden terms</td></tr>
          <tr><td>Transparency</td><td>‚úÖ We explain what to expect before you commit</td><td>‚ùå Fine print, vague fees, hard to cancel</td></tr>
        </tbody>
      </table>
    </div>

    <div class="cta">
      <h2>Want the verified path?</h2>
      <p class="muted-text">See your options in ~60 seconds. No cost. No pressure. No surprises.</p>
      <a href="https://debthelpform.com/#lead-form" target="_blank" rel="noopener">Start My Free Estimate</a>
    </div>

    <p class="muted-text" style="text-align:center;margin-top:1.5rem">
      This is an educational comparison and does not reference any specific company or competitor. DebtReliefGuard.com is not a provider or seller of debt relief services.
    </p>
  </main>

  <!-- Bottom Bars -->
  <div class="mobile-bar" aria-label="Quick actions">
    <a class="mobile-call" href="tel:+18884377141">üìû Call 888-437-7141</a>
    <a class="mobile-est" href="https://debthelpform.com/#lead-form" target="_blank" rel="noopener">üîí Start Secure Estimate</a>
  </div>

  <!-- Sticky bottom menu (expanded to all pages) -->
  <footer class="sticky-menu" role="contentinfo" aria-label="Footer navigation">
    <nav>
      <a href="/">Home</a>
      <a href="/compare.us.html" aria-current="page">Compare Us</a>
      <a href="/how.it.works.index.html">How It Works</a>
      <a href="/debt.relief.option.index.html">Relief Options</a>
      <a href="/credit.card.relief.index.html">Credit Card Relief</a>
      <a id="link-savings-foot" href="/savings.calculator.index.html">Calculator</a>
      <a href="/reviews.index.html">Reviews</a>
      <a href="/blog.index.html">Blog</a>
      <a href="/scam.warning.index.html">Scam Warnings</a>
      <a href="/faq.index.html">FAQ</a>
      <a href="/contact.index.html">Contact</a>
      <a href="/privacy.policy.index.html">Privacy</a>
      <a href="/terms.index.html">Terms</a>
      <a href="/geo-blocked.html" rel="nofollow">Geo-Blocked</a>
      <a href="https://debthelpform.com" target="_blank" rel="noopener">DebtHelpForm.com</a>
      <a href="https://gatewaydebthelp.com" target="_blank" rel="noopener">GatewayDebtHelp.com</a>
    </nav>
  </footer>

  <!-- Visible legal/disambiguation note -->
  <footer class="note">
    <p>¬© 2025 DebtReliefGuard.com ‚Äî Trust-First. Scam-Free. GFSR Verified.</p>
    <p>Website operated by <a href="https://gatewayfinancialsettlementrelief.com" target="_blank" rel="noopener">Gateway Financial Settlement Relief</a></p>
    <p>‚ÄúGateway Debt Help‚Äù is the marketing brand of <strong>Gateway Financial Settlement Relief, LLC</strong>. Not affiliated with ‚ÄúGateway Debt Relief‚Äù of Costa Mesa, CA.</p>
  </footer>

  <!-- Bot heuristic (simple honeypot) -->
  <script>
    (function(){
      const honeypot=document.createElement("input");
      honeypot.type="text";honeypot.name="website";honeypot.autocomplete="off";
      honeypot.hidden=true;honeypot.setAttribute("aria-hidden","true");
      document.body.appendChild(honeypot);
      let u=false,t=0; addEventListener('mousemove',()=>u=true,{passive:true});
      addEventListener('keydown',()=>u=true,{passive:true});
      setInterval(()=>t++,1000);
      window.validateBotProtections=()=> (honeypot.value==="" && u && t>=3);
    })();
  </script>

  <!-- Savings Calculator link fallback (index ‚Üí non-index if needed) -->
  <script>
    (function(){
      async function safeNav(e, preferred, fallback){
        try{
          e.preventDefault();
          const r = await fetch(preferred, {method:'HEAD', cache:'no-store', redirect:'manual'});
          if (r && (r.ok || r.status===304)) location.href = preferred;
          else location.href = fallback;
        }catch(_){ location.href = fallback; }
      }
      const preferred = '/savings.calculator.index.html';
      const fallback  = '/savings.calculator.html';
      const aTop = document.getElementById('link-savings-top');
      const aFoot = document.getElementById('link-savings-foot');
      if (aTop)  aTop.addEventListener('click',  (e)=>safeNav(e, preferred, fallback));
      if (aFoot) aFoot.addEventListener('click', (e)=>safeNav(e, preferred, fallback));
    })();
  </script>

  <!-- Savings message parity (optional; updates #ab-cta-text if API present) -->
  <script>
  (() => {
    const now = () => Date.now();
    const sleep = (ms) => new Promise(r => setTimeout(r, ms));
    const timeoutFetch = (url, opts={}, ms=5000) => {
      const ctrl = new AbortController(); const to=setTimeout(()=>ctrl.abort(), ms);
      return fetch(url, { ...opts, signal: ctrl.signal }).finally(()=>clearTimeout(to));
    };
    const safeText = (s) => (s ?? '').toString();

    (async function loadSavingsMessage(){
      const el = document.querySelector('#ab-cta-text'); if(!el) return;
      const FALLBACK = el.textContent || "Compare Verified Relief vs Risky Promises";
      const CACHE_KEY = 'drg:savings:v1'; const MAX_AGE_MS = 10 * 60 * 1000;

      try {
        const raw = localStorage.getItem(CACHE_KEY);
        if (raw) {
          const { ts, message } = JSON.parse(raw);
          if (ts && (Date.now()-ts) < MAX_AGE_MS && message) el.textContent = safeText(message);
        }
      } catch(_) {}

      let ok=false, data;
      for(let attempt=0; attempt<2 && !ok; attempt++){
        try{
          let r = await timeoutFetch('/api/savings-message', {
            headers: { 'Accept':'application/json', 'X-Requested-With':'XMLHttpRequest' },
            cache:'no-store', credentials:'omit'
          }, attempt ? 4500 : 3500);
          if(!r.ok || !r.headers.get('content-type')?.includes('application/json')) throw new Error('HTTP '+r.status);
          data = await r.json();
          if(data && data.message){
            el.textContent = safeText(data.message);
            ok=true;
            try{ localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), message: data.message })); }catch(_){}
          }
        }catch(e){ await sleep(200); }
      }
      if(!ok) el.textContent = FALLBACK;
    })();
  })();
  </script>

  <!-- 016 Chat Markup -->
  <button id="gfsrChatFab" class="gfsr-chat-fab" aria-haspopup="dialog" aria-expanded="false" aria-controls="gfsrChatSheet" style="position:fixed; right:14px; bottom:calc(var(--callbar-h) + 80px); z-index:10003; display:inline-flex; align-items:center; gap:.5rem; padding:.8rem 1rem; border-radius:999px; border:1px solid rgba(0,0,0,.06); background:#0b63f6; color:#fff; box-shadow:0 10px 30px rgba(0,0,0,.18); font:600 14px/1.1 system-ui,-apple-system,Segoe UI,Roboto,Arial">üí¨ Chat</button>

  <section id="gfsrChatSheet" class="gfsr-chat-sheet" role="dialog" aria-modal="true"
           aria-labelledby="gfsrChatTitle" aria-describedby="gfsrChatDesc" hidden
           style="position:fixed; inset:auto 0 0 0; margin:auto; width:100%; max-width:420px; right:12px; left:auto;
                  border-radius:18px 18px 0 0; background:#fff; box-shadow:0 10px 30px rgba(0,0,0,.18);
                  transform:translateY(110%); transition:transform .28s ease; border:1px solid rgba(0,0,0,.06); z-index:10004">
    <header class="gfsr-chat-head" style="display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid rgba(0,0,0,.06); background:#f9fafb; border-radius:inherit">
      <div>
        <div id="gfsrChatTitle" class="gfsr-chat-title" style="font-weight:700; font-size:15px">Debt Help Assistant</div>
        <div id="gfsrChatDesc" class="sr-only">Chat with our assistant. Press Escape to close.</div>
      </div>
      <button id="gfsrChatClose" class="gfsr-chat-close" aria-label="Close chat" style="background:transparent; border:none; padding:8px; border-radius:10px; cursor:pointer">‚úï</button>
    </header>

    <div id="gfsrChatBody" class="gfsr-chat-body" tabindex="0" style="display:flex; flex-direction:column; gap:8px; padding:12px; height:min(70vh, 520px); overflow:auto; -webkit-overflow-scrolling:touch"></div>

    <form id="gfsrChatForm" class="gfsr-chat-input" style="display:flex; gap:8px; padding:10px; border-top:1px solid rgba(0,0,0,.06); background:#fff; border-radius:0 0 18px 18px">
      <label class="sr-only" for="gfsrChatInput">Type your message</label>
      <textarea id="gfsrChatInput" rows="1" placeholder="Type a message‚Ä¶" aria-label="Message" style="flex:1; resize:none; min-height:42px; max-height:120px; padding:10px 12px; border:1px solid #e5e7eb; border-radius:12px; font-size:14px; line-height:1.35"></textarea>
      <button id="gfsrChatSend" class="gfsr-chat-send" type="submit" style="background:#0b63f6; color:#fff; border:none; padding:12px 14px; border-radius:12px; font-weight:700">Send</button>
    </form>
  </section>

  <!-- 016 Chat Script -->
  <script>
  (() => {
    const el = {
      fab:   document.getElementById('gfsrChatFab'),
      sheet: document.getElementById('gfsrChatSheet'),
      close: document.getElementById('gfsrChatClose'),
      body:  document.getElementById('gfsrChatBody'),
      form:  document.getElementById('gfsrChatForm'),
      input: document.getElementById('gfsrChatInput'),
      send:  document.getElementById('gfsrChatSend'),
    };

    const openChat = () => {
      el.sheet.removeAttribute('hidden');
      el.sheet.classList.add('open');
      el.sheet.style.transform='translateY(0)';
      el.fab.setAttribute('aria-expanded','true');
      setTimeout(()=>el.input.focus(),120);
    };
    const closeChat = () => {
      el.sheet.classList.remove('open');
      el.sheet.style.transform='translateY(110%)';
      el.fab.setAttribute('aria-expanded','false');
      el.sheet.setAttribute('hidden','');
      el.fab.focus();
    };
    el.fab.addEventListener('click', openChat);
    el.close.addEventListener('click', closeChat);
    window.addEventListener('keydown', e => { if (e.key==='Escape' && !el.sheet.hasAttribute('hidden')) closeChat(); });

    const addMsg = (text, who='bot') => {
      const div = document.createElement('div'); div.className = `gfsr-msg ${who}`;
      div.style.maxWidth='88%'; div.style.padding='10px 12px'; div.style.borderRadius='14px';
      div.style.fontSize='14px'; div.style.lineHeight='1.35';
      if (who==='user'){ div.style.marginLeft='auto'; div.style.background='#0b63f6'; div.style.color='#fff'; div.style.borderTopRightRadius='4px'; }
      else if (who==='bot'){ div.style.background='#eef2ff'; div.style.color='#111'; div.style.borderTopLeftRadius='4px'; }
      else { div.style.background='#f3f4f6'; div.style.color='#444'; div.style.fontSize='12px'; div.style.margin='4px auto'; }
      div.textContent = (text??'').toString();
      el.body.appendChild(div); el.body.scrollTop = el.body.scrollHeight;
    };

    const KEY='gfsr-chat-history';
    try { (JSON.parse(localStorage.getItem(KEY)||'[]')).slice(-20).forEach(m=>addMsg(m.text,m.who)); } catch {}
    const remember=(t,w)=>{ try{ const h=JSON.parse(localStorage.getItem(KEY)||'[]'); h.push({text:t,who:w,t:Date.now()}); localStorage.setItem(KEY, JSON.stringify(h).slice(-8000)); }catch{} };

    let interacted=false;
    addEventListener('mousemove',()=>interacted=true,{once:true,passive:true});
    addEventListener('keydown', ()=>interacted=true,{once:true,passive:true});
    const nonce = () => Array.from(crypto.getRandomValues(new Uint8Array(12))).map(b=>b.toString(16).padStart(2,'0')).join('');

    const API = `${location.origin}/chat`;
    let busy = false;

    el.form.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!interacted || busy) return;

      const message = (el.input.value||'').trim();
      if (!message) return;

      addMsg(message,'user'); remember(message,'user');
      el.input.value=''; busy=true; el.send.disabled=true;

      try{
        const r = await fetch(API, {
          method:'POST',
          headers:{
            'Content-Type':'application/json',
            'Accept':'application/json',
            'X-Requested-With':'XMLHttpRequest',
            'X-Client-Nonce': nonce()
          },
          body: JSON.stringify({
            messages:[{ role:'user', content: message }],
            source:'frontend',
            url: location.href
          })
        });
        if(!r.ok){
          const t=await r.text().catch(()=> ''); addMsg(`Service error ${r.status}.`, 'meta'); console.error('CHAT ERROR', r.status, t); return;
        }
        const ct = r.headers.get('content-type')||''; let reply='';
        if (ct.includes('application/json')) {
          const d = await r.json();
          reply = d.reply || d.message || JSON.stringify(d);
        } else {
          reply = await r.text();
        }
        addMsg(reply || 'Thanks ‚Äî how else can I help?','bot'); remember(reply||'','bot');
      }catch(err){
        console.error('CHAT NETWORK ERROR', err);
        addMsg('Network error ‚Äî please try again.','meta');
      }finally{
        busy=false; el.send.disabled=false; el.input.focus();
      }
    });

    el.input.addEventListener('keydown', e => { if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); el.form.requestSubmit(); } });

    if (!el.body.children.length) addMsg('Hi! I can help you compare debt relief options and next steps.');
  })();
  </script>

  <!-- 015: Telemetry ping (scoped to DRG) -->
  <script>
  (() => {
    const now = () => Date.now();
    (function sendTelemetry(){
      try{
        const key='drg:sess:v1'; let sid=sessionStorage.getItem(key);
        if(!sid){ sid=crypto.randomUUID(); sessionStorage.setItem(key, sid); }
        const payload={ v:1, ts:now(), sid, url:location.href, ref:document.referrer||null, w:innerWidth, h:innerHeight };
        const blob=new Blob([JSON.stringify(payload)],{type:'application/json'});
        if(navigator.sendBeacon) navigator.sendBeacon('/ingest', blob);
        else fetch('/ingest',{ method:'POST', body:blob, keepalive:true, headers:{'Content-Type':'application/json'} }).catch(()=>{});
      }catch(_){}
    })();
  })();
  </script>

  <!-- Mobile dual action bar (ensure shown on small screens) -->
  <div class="mobile-bar" aria-label="Quick actions" style="display:none"></div>
  <script>
    if (window.matchMedia && window.matchMedia('(max-width: 768px)').matches) {
      document.querySelectorAll('.mobile-bar').forEach(el=>el.style.display='flex');
    }
  </script>

  <noscript><p style="text-align:center;color:#666">Enable JavaScript to view dynamic comparisons and chat.</p></noscript>
</body>
</html>
